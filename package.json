{
  "name": "fullvote-website",
  "version": "0.0.0",
  "private": true,
  "scripts": {
    "comment:hashmark": "echo \"hashmark -l 8 'assets/**/*' 'public/{name}-{hash}{ext}' --asset-map 'assets.json'\"",
    "css:build": "run-p css:main:build",
    "css:watch": "run-p css:main:watch",
    "rev": "gulp",
    "css:lint": "run-p css:main:lint",
    "css:main:autoprefixer": "postcss --use autoprefixer assets/built/app.css -o assets/built/app.css",
    "css:main:build": "run-s css:main:transpile css:main:autoprefixer css:main:concatenate css:main:minify",
    "css:main:concatenate": "cat assets/built/app.css > assets/built/bundle.css",
    "css:main:minify": "cssmin assets/built/bundle.css > assets/built/bundle.min.css",
    "css:main:transpile": "node-sass assets/sass/main.scss assets/built/app.css",
    "css:main:lint": "sass-lint -v -q -c assets/sass/.sass-lint.yml assets/sass/components/*.scss",
    "css:main:watch": "watch \"npm run css:main:build\" assets/sass/ node_modules",
    "deploy": "npm run build && npm run cache:test && echo \"TODO: deploy nginx to s3 here\" && eb deploy",
    "js:lint": "eslint .",
    "js:test": "jest",
    "js:test:watch": "jest --watch",
    "js:build": "webpack",
    "js:build-sw": "babel --plugins preval assets/javascript/sw.js --out-file public/built/sw.js",
    "js:watch": "FV_SUPRESS_CACHING=true FV_SUPRESS_SENTRY=true FV_SUPRESS_ANALYTICS=true webpack --watch --config=webpack.watch.config.js",
    "server:build": "npm run server:build:pages && npm run server:build:nginx",
    "server:build:pages": "node deployment_scripts/build-static-pages.js",
    "server:build:nginx": "FV_SUPRESS_SENTRY=true node deployment_scripts/build-nginx-conf",
    "lint:shouldBeUsedButTooBroken": "run-s css:lint js:lint",
    "lint": "echo \"lint is being skipped\"",
    "assets:build": "rm -rf assets/built && npm run css:build && npm run js:build",
    "assets:expose": "rm -rf public && npm run rev && node deployment_scripts/map_rev_manifest.js && ls public/built && node deployment_scripts/static_replace.js",
    "assets:buildAndExpose": "npm run assets:build && npm run assets:expose && npm run assets:build && npm run assets:expose",
    "image:optimize": ". deployment_scripts/convert-images.sh",
    "build": "npm run assets:buildAndExpose && npm run js:build-sw && npm run image:optimize && npm run server:build",
    "beanstalk": "npm run start",
    "test:format": "prettier -l \"**/*.js\" \"!public/**/*.js\" \"!assets/built/**/*.js\"",
    "format": "prettier --write \"**/*.js\" \"!public/**/*.js\" \"!assets/built/**/*.js\"",
    "start": "node ./bin/www",
    "start:dev": "npm run watch:lite & FV_SUPRESS_CACHING=true FV_SUPRESS_SENTRY=true FV_SUPRESS_ANALYTICS=true nodemon --inspect --delay 3 -e js,css,html ./bin/www",
    "start:prod": "npm run watch & nodemon --delay 5 -e js,css,html ./bin/www",
    "test": "run-s lint js:test cache:test todo:test test:format",
    "todo:test": "git --no-pager grep -i 'before next deploy' README.md && exit 125 || echo 'PASS: no \"before next deploy\" todo dependency in README'",
    "cache:test": "run-s cache:test:1 cache:test:2 cache:test:3 cache:test:4 cache:test:5 cache:test:6 cache:test:7 cache:test:8 cache:test:9",
    "cache:test:1": "git --no-pager grep '{{urlFor' -- './*' ':!package.json' && exit 125 || echo 'PASS: no urlFor mistake of missing pound'",
    "cache:test:2": "git --no-pager grep '=\"{{/urlFor' -- './*' ':!package.json' && exit 125 || echo 'PASS: no urlFor mistake of starting with close'",
    "cache:test:3": "git --no-pager grep \"'/\\?assets\" ./db_scripts && exit 125 || echo 'PASS: no assets reference in db_scripts'",
    "cache:test:4": "git --no-pager grep 'urlFor' ./db_scripts && exit 125 || echo 'PASS: no urlFor reference in db_scripts'",
    "cache:test:5": "bash deployment_scripts/test_url_for.sh && echo 'PASS: no forgotten urlFor as checked after ='",
    "cache:test:6": "git --no-pager grep '=\"/\\?public/' -- './*' ':!package.json' ':!db_scripts' ':!views/head.partial.html' && exit 125 || echo 'PASS: no use of public (excluding db_scripts)'",
    "cache:test:7": "git --no-pager grep '{{#urlFor}}[^/]' -- './*' ':!package.json' ':!README.md' && exit 125 || echo 'PASS: no urlFor not followed by a slash'",
    "cache:test:8": "git --no-pager grep 'fullvote.org/assets' -- './*' ':!package.json' ':!assets/sitemap.xml' && exit 125 || echo 'PASS: no raw urls not using urlFor'",
    "cache:test:9": "git --no-pager grep 'fullvote.org/public' -- './*' ':!package.json' ':!assets/sitemap.xml' && exit 125 || echo 'PASS: no raw urls not using urlFor'",
    "cache:test:10": "echo \"todo: add test to make sure no public without slash in front in db_scripts\"",
    "watch": "watch \"npm run assets:buildAndExpose && npm run js:build-sw\" assets --wait=40",
    "watch:lite": "npm run css:watch & npm run js:watch"
  },
  "dependencies": {
    "autoprefixer": "~6.3.3",
    "aws-sdk": "^2.106.0",
    "body-parser": "~1.13.2",
    "bootstrap": "^4.0.0-alpha.5",
    "cheerio": "^1.0.0-rc.2",
    "compression": "^1.6.1",
    "cookie-parser": "~1.3.5",
    "cssmin": "^0.4.3",
    "debug": "~2.2.0",
    "express": "~4.13.1",
    "gm": "^1.23.0",
    "gulp": "^3.9.1",
    "gulp-rev": "^7.1.2",
    "helmet": "^0.9.1",
    "image-size": "^0.6.1",
    "jsonwebtoken": "^7.4.3",
    "mailgun-js": "^0.9.1",
    "markdown-it": "^8.4.0",
    "material-design-lite": "^1.1.3",
    "mkdirp": "^0.5.1",
    "morgan": "~1.6.1",
    "multer": "^1.3.0",
    "mustache-express": "^1.2.2",
    "node-sass": "^4.5.3",
    "npm-run-all": "^4.0.2",
    "pg-promise": "^5.5.0",
    "postcss-cli": "~2.5.1",
    "raven": "^0.12.3",
    "rellax": "^1.0.0",
    "replace-in-file": "^2.5.0",
    "request-promise-native": "^1.0.3",
    "rimraf": "^2.6.1",
    "scroll-parallax": "^2.0.0",
    "serve-favicon": "~2.3.0",
    "shopify-buy": "^0.7.1",
    "supertest": "^3.0.0",
    "sync-request": "^4.1.0",
    "to-markdown": "^3.1.0",
    "uglify-js": "v2.4.24",
    "webpack": "^3.4.1",
    "winston": "^2.2.0"
  },
  "devDependencies": {
    "babel": "^6.23.0",
    "babel-cli": "^6.24.1",
    "babel-loader": "^7.1.1",
    "babel-macros": "^0.5.1",
    "babel-plugin-preval": "^1.4.1",
    "catw": "1.0.1",
    "csslint": "~0.10.0",
    "eslint": "^2.8.0",
    "image-size": "^0.6.0",
    "jest": "^21.1.0",
    "nodemon": "^1.11.0",
    "prettier": "^1.9.2",
    "sass-lint": "^1.7.0",
    "watch": "~0.16.0",
    "watchify": "^3.3.1"
  },
  "prettier": {
    "printWidth": 80,
    "tabWidth": 2,
    "singleQuote": true,
    "trailingComma": "none"
  }
}
